---
driver:
  name: vagrant

provisioner:
  name: chef_zero
  data_bags_path: test/integration/data_bags

platforms:
- name: debian-7.6
- name: debian-8.1

suites:
  - name: default
    run_list:
      - recipe[apt]
      - recipe[git]
      - recipe[build-essential]
      - recipe[pentester::autopwn]
      - recipe[pentester::sn1per]
      - recipe[pentester::fuzzdb]
      - recipe[pentester::webshell]
      - recipe[pentester::itib]
      - recipe[pentester::nullsec]
      - recipe[pentester::veil]
      - recipe[pentester::spf]
      - recipe[pentester::ptf]
      - recipe[pentester::w3af_src]
      - recipe[pentester::w3af_profiles]
      - recipe[pentester::mitmproxy]
      - recipe[pentester::pwndbg]
      - recipe[pentester::radare2]
      - recipe[pentester::jackit]
      - recipe[pentester::bleah]
      - recipe[pentester::rogue-ap]
    attributes:
      pentester:
        pwndbg:
          run_installer: true
        radare2:
          run_installer: true
        sn1per:
          packages: []
        w3af:
          profiles:
            kitchen:
              profile:
                name: kitchen
                description: Test profile for kitchen
              output.console:
                verbose: True
  - name: gitrob
    run_list:
      - recipe[apt]
      - recipe[postgresql::server]
      - recipe[pentester::gitrob_db]
      - recipe[pentester::gitrob_install]
      - recipe[pentester::gitrob_config]
    attributes:
      pentester:
        gitrob:
          use_db: true
          signatures:
            -
              part: filename
              type: match
              pattern: c99.php
              caption: Oh "F*ck** backdoor!"
              description: null
          gh_auth_token: this-token-should-be-replaced-with-databag
          db:
            host: 127.0.0.1
            port: 5432
            db: gitrob
            user: gitrob
            pass: gitrob
