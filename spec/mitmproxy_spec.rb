require_relative 'spec_helper'

describe 'pentester::mitmproxy' do
  let(:subject) do
    ChefSpec::SoloRunner.new.converge(described_recipe)
  end

  ['python-dev', 'libffi-dev', 'libssl-dev', 'libxml2-dev', 'libxslt1-dev',
   'libjpeg-dev', 'zlib1g-dev', 'g++', 'python-enum34'].each do |pkg|
    it "installs package[#{pkg}]" do
      expect(subject).to install_package(pkg)
    end
  end

  it 'installs package[mitmproxy]' do
    expect(subject).to install_package('mitmproxy')
  end
end
