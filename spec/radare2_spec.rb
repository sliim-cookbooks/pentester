# -*- coding: utf-8 -*-

require_relative 'spec_helper'

describe 'pentester::radare2' do
  let(:subject) do
    ChefSpec::SoloRunner
      .new(platform: 'debian',
           version: '8.0') do |node|
    end.converge(described_recipe)
  end

  it 'syncs git[/opt/radare2]' do
    expect(subject).to sync_git('/opt/radare2')
      .with(repository: 'https://github.com/radare/radare2',
            reference: 'master')
  end

  it 'runs execute[sys/install.sh]' do
    expect(subject).to run_execute('sys/install.sh')
      .with(cwd: '/opt/radare2')
  end
end
