# -*- coding: utf-8 -*-

require_relative 'spec_helper'

describe 'pentester::msf_src' do
  let(:subject) do
    ChefSpec::SoloRunner.new.converge(described_recipe)
  end

  it 'installs package[libpcap-dev]' do
    expect(subject).to install_package('libpcap-dev')
  end

  it 'syncs git[/opt/metasploit-framework]' do
    expect(subject).to sync_git('/opt/metasploit-framework')
      .with(user: 'root',
            group: 'root',
            repository: 'https://github.com/rapid7/metasploit-framework',
            reference: 'master')
  end
end
