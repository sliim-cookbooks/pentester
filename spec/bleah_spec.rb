require_relative 'spec_helper'

describe 'pentester::bleah' do
  let(:subject) do
    ChefSpec::SoloRunner.new.converge(described_recipe)
  end

  it 'includes recipe[git]' do
    expect(subject).to include_recipe('git')
  end

  it 'installs spython_runtime[2]' do
    expect(subject).to install_spython_runtime('2')
  end

  it 'sync git[/opt/bleah]' do
    expect(subject).to sync_git('/opt/bleah')
      .with(repository: 'https://github.com/evilsocket/bleah',
            reference: 'master')
  end
end
